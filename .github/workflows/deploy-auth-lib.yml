name: Deploy Auth Package

on:
  push:
    branches:
      - main
    paths:
      - "Auth-Lib/*"

jobs:
  request-approval:
    name: Request Approval for Deploy
    environment: Packages
    runs-on: ubuntu-latest
    steps:
      - name: Waiting for approval
        run: echo "Waiting for manual approval"
    
  trigger-deploy:
    name: Call Deploy Java Packages
    needs: request-approval
    permissions:
      contents: read
      packages: write 
    uses: Peralta-CashFlow/CashFlow-WorkFlows/.github/workflows/java-packages-deploy-v1.yml@main
    with:
      package: 'Auth-Lib'
      java_version: '21'
      java_distribution: 'zulu'
